/*
  ==============================
  データ定義（data.json を直接埋め込み）
  ==============================
*/

const data = [

{ "src": "1_天井狙い_非リセット時_不問_不問.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"不問","内部状態":"不問" },
{ "src": "2_天井狙い_非リセット時_不問_低確.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"不問","内部状態":"低確" },
{ "src": "3_天井狙い_非リセット時_不問_通常.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"不問","内部状態":"通常" },
{ "src": "4_天井狙い_非リセット時_不問_高確.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"不問","内部状態":"高確" },
{ "src": "5_天井狙い_非リセット時_モードA_不問.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"モードA","内部状態":"不問" },
{ "src": "6_天井狙い_非リセット時_モードA_低確.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"モードA","内部状態":"低確" },
{ "src": "7_天井狙い_非リセット時_モードA_通常.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"モードA","内部状態":"通常" },
{ "src": "8_天井狙い_非リセット時_モードA_高確.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"モードA","内部状態":"高確" },
{ "src": "9_天井狙い_非リセット時_モードB_不問.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"モードB","内部状態":"不問" },
{ "src": "10_天井狙い_非リセット時_モードB_低確.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"モードB","内部状態":"低確" },
{ "src": "11_天井狙い_非リセット時_モードB_通常.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"モードB","内部状態":"通常" },
{ "src": "12_天井狙い_非リセット時_モードB_高確.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"モードB","内部状態":"高確" },
{ "src": "13_天井狙い_非リセット時_モードC_不問.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"モードC","内部状態":"不問" },
{ "src": "14_天井狙い_非リセット時_モードC_低確.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"モードC","内部状態":"低確" },
{ "src": "15_天井狙い_非リセット時_モードC_通常.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"モードC","内部状態":"通常" },
{ "src": "16_天井狙い_非リセット時_モードC_高確.png","狙い目":"天井狙い","リセットの有無":"非リセット時","モード":"モードC","内部状態":"高確" },
{ "src": "17_天井狙い_リセット時_不問_不問.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"不問","内部状態":"不問" },
{ "src": "18_天井狙い_リセット時_不問_低確.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"不問","内部状態":"低確" },
{ "src": "19_天井狙い_リセット時_不問_通常.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"不問","内部状態":"通常" },
{ "src": "20_天井狙い_リセット時_不問_高確.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"不問","内部状態":"高確" },
{ "src": "21_天井狙い_リセット時_モードA_不問.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"モードA","内部状態":"不問" },
{ "src": "22_天井狙い_リセット時_モードA_低確.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"モードA","内部状態":"低確" },
{ "src": "23_天井狙い_リセット時_モードA_通常.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"モードA","内部状態":"通常" },
{ "src": "24_天井狙い_リセット時_モードA_高確.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"モードA","内部状態":"高確" },
{ "src": "25_天井狙い_リセット時_モードB_不問.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"モードB","内部状態":"不問" },
{ "src": "26_天井狙い_リセット時_モードB_低確.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"モードB","内部状態":"低確" },
{ "src": "27_天井狙い_リセット時_モードB_通常.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"モードB","内部状態":"通常" },
{ "src": "28_天井狙い_リセット時_モードB_高確.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"モードB","内部状態":"高確" },
{ "src": "29_天井狙い_リセット時_モードC_不問.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"モードC","内部状態":"不問" },
{ "src": "30_天井狙い_リセット時_モードC_低確.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"モードC","内部状態":"低確" },
{ "src": "31_天井狙い_リセット時_モードC_通常.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"モードC","内部状態":"通常" },
{ "src": "32_天井狙い_リセット時_モードC_高確.png","狙い目":"天井狙い","リセットの有無":"リセット時","モード":"モードC","内部状態":"高確" },





];

/*
  ==============================
  初期化
  ==============================
*/

const filtersDiv = document.getElementById("filters");
const galleryDiv = document.getElementById("gallery");

// src 以外を条件キーとして取得
const conditionKeys = Object.keys(data[0]).filter(key => key !== "src");

// select要素保持
const selects = {};

// 条件UI生成
conditionKeys.forEach(key => {
  const group = document.createElement("div");
  group.className = "filter-group";

  const label = document.createElement("label");
  label.textContent = key + "：";

  const select = document.createElement("select");

  // ユニーク値のみ追加（「すべて」は作らない）
  const values = [...new Set(data.map(item => item[key]))];

  values.forEach(value => {
    const option = document.createElement("option");
    option.value = value;
    option.textContent = value;
    select.appendChild(option);
  });

  select.addEventListener("change", update);

  group.appendChild(label);
  group.appendChild(select);
  filtersDiv.appendChild(group);

  selects[key] = select;
});

// 初期表示
update();

/*
  ==============================
  検索＆描画
  ==============================
*/

function update() {
  galleryDiv.innerHTML = "";

  const filtered = data.filter(item => {
    return conditionKeys.every(key => {
      return item[key] === selects[key].value;
    });
  });

  // 一致した画像のみ表示（0件なら何も表示しない）
  filtered.forEach(item => {
    const img = document.createElement("img");
    img.src = `images/${item.src}`;
    img.alt = item.src;
    galleryDiv.appendChild(img);
  });

}
